---
title: "Library"
---

::: {.callout-warning}
- Please don't assign undocumented name-value pair parameters to the functions. For example, `'CreateInfoOnly'` and `'InParforLoop'`, which are preserved for parallel computing, and you will never need to set them manually unless you are a developer.

:::


## Main Functions

There are four major stages in the complete GEMS-MagTIP workflow, and each stage is wrapped by the main functions as below: 

1. [`statind`](#statind): The calculation of statistical indices.
2. [`anomalyind`](#anomalyind): The calculation of anomaly indices number according to statistical indices.
3. [`molscore`](#molscore): Training phase based on anomaly indices, which involves the calculation of single-station TIP, matching TIP by target earthquakes and calculate Molchan scores accordingly.
4. [`molscore3`](#molscore3): Forecasting phase based on the model parameters of the highest Molchan scores, involving the calculation of joint-station TIP and probability based on the results of 2 and 3.

The four stages is wrapped by four functions with keyword arguments that we can customize some hyper parameters which are associated with model optimization and probability forecast. 



```{julia}
#| echo: false

using ReadMatlabDocstrings, GEMSMagTIPDocumentation, OkFiles, Markdown

y = [getdoc(dir_0("GEMS-MagTIP-insider/src/main/statind.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/statind_parfor.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/anomalyind.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/molscore.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/molscore_parfor.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/molscore3.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/main/molscore3_parfor.m"), filename_header=3)]

Markdown.parse(reduce(*, y))

```

## Load raw data and convert it into a standard format

```{julia}
#| echo: false

y = [
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/conv_gemsdata.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/conv_geomagdata.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/readgems.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/read_gemsdat.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/geoelectric_projection.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/standarddataname.m"), filename_header=3),
    getdoc(dir_0("GEMS-MagTIP-insider/src/readdata/columnind.m"), filename_header=3)]

Markdown.parse(reduce(*, y))
```

## Available Preprocessing Functions


{{< include "../GEMS-MagTIP-insider/src/preprocess/README.md" >}}


```{julia}
#| echo: false

files = filelist(r".*\.m", dir_0("GEMS-MagTIP-insider/src/preprocess"))
y = [getdoc(f, filename_header=3) for f in files]

Markdown.parse(reduce(*, y))
```


::: {.callout-note}
`generalfilterprocess` is the core shared among `'ULF_X'` and `BP_X` family; please refer [Filtering Functions](#filtering-functions).
:::


## Filtering Functions

```{julia}
#| echo: false

files = filelist(r".*\.m", dir_0("GEMS-MagTIP-insider/src/preprocess/filtering"))
y = [getdoc(f, filename_header=3) for f in files]

Markdown.parse(reduce(*, y))
```


## Internal API for TIP Calculation
```{julia}
#| echo: false

files = filelistall(dir_0("GEMS-MagTIP-insider/src/tip-calculation"))
y = [getdoc(f, filename_header=3) for f in files]

Markdown.parse(reduce(*, y))
```

## Format

```{julia}
#| echo: false

getdoc(dir_0("GEMS-MagTIP-insider/src/@fmt/fmt.m"), filename_header=3) |> Markdown.parse
```

## Others

```{julia}
#| echo: false

files = filelistall(dir_0("GEMS-MagTIP-insider/src/others"))
y = [getdoc(f, filename_header=3) for f in files]

Markdown.parse(reduce(*, y))
```